<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fake News Archive</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="/static/style.css"/>
</head>

<body>

<div class="container py-5">
<div class="card">

<div class="header">
<h1>THE DAILY ARCHIVE</h1>
<small>Independent Fact Verification Desk</small>
</div>

<div class="card-body">

<form method="post" action="/predict">
<div class="mb-3">
<label class="form-label">Headline</label>
<input name="title" class="form-control" placeholder="Enter headline" value="{{ title if title is defined else '' }}">
</div>

<div class="mb-3">
<label class="form-label">Article Text</label>
<textarea name="text" rows="6" class="form-control" placeholder="Paste article content">{{ text if text is defined else '' }}</textarea>
</div>

<div class="d-flex gap-2 mb-3">
<button class="btn btn-primary">Analyze Article</button>
<button type="button" class="btn btn-outline-secondary" onclick="fillReal()">Sample Real</button>
<button type="button" class="btn btn-outline-secondary" onclick="fillFake()">Sample Fake</button>
</div>
</form>

<hr/>

<form method="post" action="/predict_url">
<label class="form-label">Verify by Source URL</label>
<div class="input-group mb-3">
<input name="url" class="form-control" placeholder="https://news-site.com/article" value="{{ url if url is defined else '' }}">
<button class="btn btn-success">Verify</button>
</div>
</form>

{% if result and not result.error %}
<div class="result-box">

<div class="verdict typewriter">
VERDICT: {{ result.display_label }}
</div>

<div class="stamp
{% if result.display_label=='FAKE' %}fake
{% elif result.display_label=='REAL' %}real
{% else %}uncertain{% endif %}">
{{ result.display_label }}
</div>

<div class="confidence">
Confidence Level: {{ (result.confidence*100)|round(1) }}%
</div>

{% if result.lime %}
<div class="explain-box">
<strong>Evidence Analysis</strong>
<ul>
{% for w,v in result.lime %}
<li>{{ w }} â†’ {{ "%.4f"|format(v) }}</li>
{% endfor %}
</ul>
</div>
{% endif %}

{% if result.shap_png %}
<img src="{{ result.shap_png }}" class="shap-img w-100">
{% endif %}

</div>
{% endif %}

{% if snippet %}
<div class="snippet-box">
{{ snippet }}
</div>
{% endif %}

</div>
</div>
</div>

<script>
function fillReal(){
document.querySelector('[name=title]').value="Scientists confirm water beneath Mars surface";
document.querySelector('[name=text]').value="Researchers using satellite imagery have confirmed evidence of water beneath the Martian surface."
}
function fillFake(){
document.querySelector('[name=title]').value="Ancient aliens control world governments";
document.querySelector('[name=text]').value="A viral claim suggests extraterrestrial beings secretly run global politics without evidence."
}
</script>

</body>
</html>
